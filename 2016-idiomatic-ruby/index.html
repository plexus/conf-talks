<html><head><link href='assets/38b7430b5ca5b0ee5308d3cca6a8b055.css' rel='stylesheet'><title>Burn Your Idiomatic Ruby</title><link rel='stylesheet' href='assets/c1cd938f43002a217f591a8a4303a896.css'><script src='assets/8f16b5edb7f88bfec561d7749e3c2241.js'></script><script>hljs.initHighlightingOnLoad();</script><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><link rel='stylesheet' type='text/css' href='assets/5a0ca255fce9de83dde16a0f27d788fe.css'><link rel='stylesheet' type='text/css' href='assets/237933ae49193327cf00413f6b668cfb.css'></head><body class='shower list'><section class='slide'></section><section class='slide' id='cover' name='1'>
<h2>Burn Your Idiomatic Ruby</h2>
<p><em>A RubyConf Australia talk by <a href='http://arnebrasseur.net'>Arne Brasseur</a></em></p>

<p><img src='assets/6c3882de069924ea15257fe0b35992b1.jpg' alt='' class='cover'></p>
<figcaption class='attribution'>Image: <a href='https://www.flickr.com/photos/shenamt/11015203525'>Fiddling while Rome burns</a> by Shena Tschofen</figcaption>
<style>

</style>

</section><section class='slide' name='2'>
<h2>You say idiomatic</h2>
<p class='big'>What does it mean?</p>
<p class='big'>Why would we want it?</p>
</section><section class='slide' name='3'>
<h2>Idiomatic</h2>
<p class='big'><strong>id·i·o·mat·ic</strong> \i-dē-ə-ˈma-tik\ <em>adjective</em></p>
<p class='big'>Relating to, or conforming to idiom</p>
</section><section class='slide' name='4'>
<h2>Idiom</h2>
<p>From Ancient Greek</p>
<p><strong>ἴδιος</strong> <em>ídios</em><br>
personal, one’s own;  peculiar, separate</p>

<p><strong>ἰδίωμα</strong> ‎<em>idíōma</em><br>
a peculiarity, a peculiar phraseology, an idiom</p>
</section><section class='slide' name='5'>
<h2>Idiom</h2>
<p><strong>id·i·om</strong> \i-dē-əm\ <em>noun</em></p>
<ol><li>a way of speaking that is particular to a specific group</li><li>a peculiar phrase or expression that is commonly understood, even though its meaning isn’t self-obvious</li></ol>
</section><section class='slide' name='6'>
<h2>Idiom (2)</h2>
<ol class='big'><li>a peculiar phrase or expression that is commonly understood, even though its meaning isn’t self-obvious</li></ol>
<p class='big'>to kick the bucket<br>
I’m pulling your leg<br>
I wouldn’t put it past him</p>
</section><section class='slide' name='7'>
<h2>Ruby idioms (2)</h2>
<p class='big'>Think: “tiny design pattern”</p>
</section><section class='slide' name='8'>




<h2>Ruby idioms (2)</h2>
<p>A method that memoizes</p>
<pre class='language-ruby'><code>def sum
  @sum ||= @left + @right
end
</code></pre>
</section><section class='slide' name='9'>
<h2>Ruby idioms (2)</h2>
<p>Method pre-condition</p>
<pre class='language-ruby'><code>def filter_negatives(list)
  raise &quot;list can&#x27;t be empty&quot; if list.empty?

  # ...
end
</code></pre>

</section><section class='slide' name='10'>
<h2>Idiom (1)</h2>
<ol class='big'><li>a way of speaking that is particular to a specific group</li></ol>
<p class='big'>“Eurospeak”<br>
High school language</p>
</section><section class='slide' name='11'>
<h2>Ruby idioms (1)</h2>
<p class='big'>Rails Ruby<br>
ruby-core Ruby<br>
Seattle.rb Ruby<br>
DataMapper/ROM Ruby</p>
</section><section class='slide' name='12'>
<h2>Ruby idioms</h2>
<p class='big'>Have evolved over time</p>






</section><section class='slide' name='13'>
<h2>Middle Ruby</h2>
<pre class='language-ruby'><code>def create_method_obj(names, params)
  o = Object.new
  for idx in 0 ... params.length
    o.instance_variable_set(&#x27;@&#x27; + names[idx],
      params[idx])
  end
  o
end
</code></pre>
</section><section class='slide' name='14'>
<h2>Middle Ruby</h2>
<pre><code class='ruby'>/Content-Disposition:.* filename=&quot;?([^\&quot;;]*)&quot;?/ni.match(h)
</code><code class='ruby'>filename = ($1 or &quot;&quot;)
</code><code class='ruby'>if /Mac/ni.match(env_table[&#x27;HTTP_USER_AGENT&#x27;]) and
</code><code class='ruby'>    /Mozilla/ni.match(env_table[&#x27;HTTP_USER_AGENT&#x27;]) and
</code><code class='ruby'>    (not /MSIE/ni.match(env_table[&#x27;HTTP_USER_AGENT&#x27;]))
</code><code class='ruby'>  filename = CGI::unescape(filename)
</code><code class='ruby'>end
</code></pre>
</section><section class='slide' name='15'>
<h2>Middle Ruby</h2>
<pre class='language-ruby'><code>class CGI
  def CGI::escape(string)
    # ...
  end

  def CGI::unescapeHTML(string)
    # ...
  end
end
</code></pre>
</section><section class='slide' name='16'>
<h2>Idiomatic</h2>
<p class='big'>Conforming to idiom(1)</p>
<p class='big'>Sounding “natural”</p>
</section><section class='slide' name='17'>
<h2>Idiomatic Code</h2>
<p class='big'>Takes advantage of the language</p>
<p class='big'>Is more easily understood by others</p>
</section><section class='slide' name='18'>
<h2>Consistency</h2>
<p class='big'>Important for projects</p>
<p class='big'>Shared ownership</p>
<p class='big'>Reduced cognitive overhead</p>
</section><section class='slide' name='19'>
<h2>Evolution of</h2>
<h2>Ruby idiom</h2>
<p class='big'>First, second, and modern era</p>
</section><section class='slide' name='20'>
<h2>The first era: 1995-2005</h2>
<p class='big'>“The primordial ooze”</p>
<p class='big'>Ruby is still very niche<br>
Early adopters from Perl, C, LISP, Smalltalk<br>
Diversity of styles</p>
</section><section class='slide' name='21'>
<h2>The second era: 2005-2010</h2>
<p class='big'>“Rails runaway train”</p>
<p class='big'>Adoption booms through Rails<br>
Idiom crystalizes around Rails<br>
Still lots of flexibility and creativity (_why!)</p>
</section><section class='slide' name='22'>
<h2>The modern era: 2010-2015</h2>
<p class='big'>“They grow up so fast”</p>
<p class='big'>Big Rails apps maintained for 5+ years<br>
Desire for best practices, consistency<br>
Wide adoption of a common style</p>
</section><section class='slide' name='23'>
<h2>The modern era: 2010-2015</h2>
<p class='big'>“The parallel track”</p>
<p class='big'>Resurgence of a “pure Ruby” crowd<br>
More open to novel approaches<br>
Develop their own idioms</p>
</section><section class='slide' name='24'>
<h2>Who makes the rules?</h2>
<p class='big'>In theory: descriptivist, style guide captures what “the people” do</p>
<p class='big'>In practice: well known influencers</p>
</section><section class='slide' name='25'>
<h2>Downsides</h2>
<p class='big'>Extra hurdle for newcomers</p>
<p class='big'>Treating idiom as normative hampers innovation</p>
</section><section class='slide' name='26'>
<h2>Times are changing</h2>
<p class='big'>The only constant is change</p>
<p class='big'>When a society changes, its language changes</p>
<p class='big'>When it comes into contact with other language groups, its language changes</p>
</section><section class='slide' name='27'>
<h2>Times are changing</h2>
<p class='big'>Distributed systems, parallelization</p>
<p class='big'>Concurrency models, type systems</p>
<p class='big'>Go, Idris, Elixir, Elm, Rust</p>
</section><section class='slide' name='28'>
<h2>Porting concepts to Ruby</h2>
<p class='big'>Monads, functional composition, transducers, CSP</p>
<p class='big'>Unseen in Ruby</p>
<p class='big'>Will look unfamliar by necessity</p>
</section><section class='slide' name='29'>
<h2>Kleisli</h2>
<pre class='language-ruby'><code>json_string = get_json_from_somewhere

result =
  Try { JSON.parse(json_string) } &gt;-&gt; json {
    Try { json[&quot;dividend&quot;].to_i /
          json[&quot;divisor&quot;].to_i }
  }
</code></pre>
</section><section class='slide' name='30'>
<h2>Kleisli</h2>
<pre class='language-ruby'><code>maybe_user =
  Maybe(user) &gt;-&gt; user {
    Maybe(user.address)
  } &gt;-&gt; address {
    Maybe(address.street)
  }
</code></pre>
</section><section class='slide' name='31'>
<h2>Kleisli</h2>
<p>From Call Sheet</p>
<pre class='language-ruby'><code>result.fmap { |value|
  broadcast :&quot;#{step_name}_success&quot;, value
  value
}.or { |value|
  broadcast :&quot;#{step_name}_failure&quot;, *args, value
  Left(StepFailure.new(step_name, value))
}
</code></pre>
</section><section class='slide' name='32'>
<h2>Transproc</h2>
<pre class='language-ruby'><code>transformation = t(:map_array, t(:symbolize_keys)
 .&gt;&gt; t(:rename_keys, user_name: :user))
 .&gt;&gt; t(:wrap, :address, [:city, :street])
</code></pre>
</section><section class='slide' name='33'>
<h2>Transducers</h2>
<pre class='language-ruby'><code>T.transduce(
  T.compose(
     T.map(:succ),
     T.filter(:even?)
  ),
  :&lt;&lt;, [], 0..9
)
# =&gt; [2, 4, 6, 8, 10]
</code></pre>
</section><section class='slide' name='34'>
<h2>Agent</h2>
<pre class='language-ruby'><code>cw = channel!(Integer, 1)
cr = channel!(Integer, 1)

select! do |s|
  s.case(cr, :receive) { |value| perform(value) }
  s.case(cw, :send, 3)
end
</code></pre>
</section><section class='slide' name='35'>
<h2>Conclusion</h2>
<p class='big'>Idiom is fluid, treat it as such</p>
<p class='big'>Programming is a form of expression, find your own voice</p>
<p class='big'>“Idiomatic” does not imply “good” and vice versa, look beyond face-value</p>
</section><section class='slide center' name='36'>
<h2>@plexus</h2>
<p class='img-yaks'><img src='assets/87d82294b69e6d0fd4d30020fcdda3aa.png' alt=''></p>
<p class='img-chestnut'><img src='assets/268c7aa97897dd88e7ab09876555e273.png' alt=''></p>
<h3 style='padding-left: 120px;'>Yaks         Chestnut</h3>
</section><section class='slide center' name='37'>
<h1 style='padding-top: 350px;'>FIN</h1>
</section><section class='slide' name='38'>
</section><section class='slide' name='39'>
</section><section class='slide' name='40'>
<h2>Idiom</h2>
<p>From Ancient Greek</p>
<p> </p>
<p><strong>ἴδιος</strong> (<em>ídios</em>)<br>
“private, personal, one’s own;  peculiar, separate”.</p>
<p> </p>
<p><strong>ἰδιοῦσθαι</strong> ‎(<em>idioûsthai</em>)<br>
“to make one’s own, appropriate to oneself”</p>
<p> </p>
<p><strong>ἰδίωμα</strong> ‎(<em>idíōma</em>)<br>
“a peculiarity, property, a peculiar phraseology, idiom”</p>
</section><section class='slide' name='41'>
<h2>Idiot</h2><p>From Ancient Greek, Latin</p>
<p> </p>
<p><strong>ἴδιος</strong> (<em>ídios</em>)<br>
“private, personal, one’s own;  peculiar, separate”.</p>
<p> </p>
<p><strong>ἰδιώτης</strong> (<em>idiōtēs</em>) “person lacking professional skill, a private citizen, individual”</p>
<p> </p>
<p>In Late Latin:</p>
<p> </p>
<p><strong>idiota</strong><br>
“uneducated or ignorant person”</p>
</section><section class='slide' name='42'>
<h2>Idiom</h2>
<p>A way a certain group of people speak.</p>
<p><em>I had studied Arabic before, but was not familiar with the local idiom.</em></p>
<p>An expression whose meaning can’t be inferred from the words that make up the expression.</p>
<p><em>you’re pulling my leg</em>, <em>in your neck of the woods</em>, <em>I’ve been a rubyist for donkey’s years.</em></p>
<p>The style of a particular artist or school or movement</p>
</section><section class='slide' name='43'>
<h2>Idiomatic</h2>
<p>The “natural” way to phrase something</p>
<p><em>come with me</em> vs <em>follow me along</em></p>
</section><section class='slide' name='44'>
<p>It’s about being able to personally express yourself.</p>
<p>It’s about being understood.</p>
</section><section class='slide' name='45'>
<p>“”</p></section><script src='assets/a3b20c8ec6c5c4b05bcb38d98d132244.js' type='text/javascript'></script></body></html>
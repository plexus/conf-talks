<html><head><link href='assets/de1b70e22db1eaf4af6297cd2a40b324.css' rel='stylesheet'><link href='assets/a664b5ae7665631c4b282834036eef85.css' rel='stylesheet'><title>Hypermedia in Practice | @plexus</title><link rel='stylesheet' href='assets/c1cd938f43002a217f591a8a4303a896.css'><script src='assets/8f16b5edb7f88bfec561d7749e3c2241.js'></script><script>hljs.initHighlightingOnLoad();</script><meta charset='utf-8'><meta name='viewport' content='width=1024'><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><link rel='stylesheet' type='text/css' href='assets/f18bd94ec5aba7568f6d335491fbe136.css'><script type='text/javascript'>setTimeout(function() {
  var attrs = document.getElementsByClassName('hljs-attribute');
  for (var i=0 ; i < attrs.length ; i++) {
    var node = attrs[i];
    var text = node.textContent;
    if (text == "_links" || text == "_embedded" || text == "_controls") {
      var strong = document.createElement('strong');
      node.parentNode.insertBefore(strong, node);
      node.parentNode.removeChild(node);
      strong.appendChild(node);
    }
  }
}, 1000);
</script></head><body><div class='reveal'><div class='slides'><section><p class='center'>Use the space bar or arrow keys to browse the slide.</p>
<p>Some of the images are pretty big, so if you see an empty slide then wait a bit.</p>
</section><section class='center' style='font-size: 70%' name='1'>
<h1>Hypermedia In Practice</h1>
<h2> </h2>
<h2><code>/RubyConf\.(LT|BY)/</code></h2>
<h2>21/22 March 2015</h2>
<p><a href='http://arnebrasseur.net/talks/2015-rubyconf-lt-by'>http://arnebrasseur.net/talks/2015-rubyconf-lt-by</a></p>
</section><section fullscreen-img='img/rock.jpg' name='2' data-background='img/rock.jpg'>
</section><section fullscreen-img='img/mysterytour.jpg' name='3' data-background='img/mysterytour.jpg'>
</section><section fullscreen-img='img/karaoke.jpg' name='4' data-background='img/karaoke.jpg'>
</section><section fullscreen-img='img/rubykaraoke.jpg' name='5' data-background='img/rubykaraoke.jpg'>
</section><section fullscreen-img='img/potato.jpg' name='6' data-background='img/potato.jpg'>
</section><section fullscreen-img='img/whiterussian.gif' name='7' data-background='img/whiterussian.gif'>
</section><section fullscreen-img='img/rgsoc.png' name='8' data-background='img/rgsoc.png'>
</section><section fullscreen-img='img/rgsoc_teams.png' name='9' data-background='img/rgsoc_teams.png'>
</section><section fullscreen-img='img/rgsoc_sponsors.png' name='10' data-background='img/rgsoc_sponsors.png'>

</section><section class='center' name='11'>
<p><img src='assets/e36b8633239def6e20866b7bc6265cad.jpg' alt=''></p>
</section><section name='12'>
<p class='center' style='font-size: 180%'>http://<strong>railsgirls</strong>summer<strong>of</strong>code.org/</p>
</section><section class='center' style='font-size: 70%' name='13'>
<h1>Hypermedia In Practice</h1>
<h2> </h2>
<h2><code>/RubyConf\.(LT|BY)/</code></h2>
<h2>21/22 March 2015</h2>
<p><a href='http://arnebrasseur.net/talks/2015-rubyconf-lt-by'>http://arnebrasseur.net/talks/2015-rubyconf-lt-by</a></p>
</section><section name='14'>
<p style='float: left; margin-left: 150px;'><img src='assets/151132f1ab2cddced0baeeecb0821898.jpg' alt=''></p>

<h1>@plexus</h1>
<pre style='border: 0;  box-shadow: 0px 0px 0px 0px rgba(0,0,0,0); font-size: 100%;'>
Ruby Lambik     Ruby Karaoke
Rails Girls     Ruby Monsters
ClojureBridge   Chestnut
Yaks            Slippery
Emacs Berlin    Euruject
</pre>
</section><section fullscreen-img='img/github.png' name='15' data-background='img/github.png'>
</section><section class='center big-image huge' name='16'>
<p> </p>
<p> </p>
<p><img src='assets/7bbcea77e172fd9aaae41959cca1e6a4.png' alt=''></p>
</section><section class='heading' name='17'>
<h1>A Story</h1>
</section><section fullscreen-img='img/it_hurts.jpg' name='18' data-background='img/it_hurts.jpg'>
</section><section class='fragments' name='19'>
<h2>A Story</h2>
<p class='fragment'>September 2013: Rails app is 6 years old</p>
<p class='fragment'>Co-tenancy styling nightmare</p>
<p class='fragment'>New sustainable approach</p>
</section><section class='fragments' name='20'>
<h2>New Front End</h2>
<p class='fragment'>Ember app</p>
<p class='fragment'>Responsive Design</p>
<p class='fragment'>Hypermedia API</p>
</section><section fullscreen-img='img/new_frontend.png' name='21' data-background='img/new_frontend.png'>
</section><section fullscreen-img='img/new_frontend_2.png' name='22' data-background='img/new_frontend_2.png'>
</section><section fullscreen-img='img/new_frontend_3.png' name='23' data-background='img/new_frontend_3.png'>
</section><section class='heading center' name='24'>
<h1>Hypermedia*</h1>
<p>*also known as REST</p>
</section><section name='25'>
<h2>Hypertext</h2>
<blockquote><p>Text and links</p></blockquote>
<p class='center'>— Some guy on stage</p>
</section><section name='26'>
<h2>Hypermedia</h2>
<blockquote><p>Hypertext, but also with images, video, etc.</p></blockquote>
<p class='center'>— Some guy on stage</p>
</section><section name='27'>
<h2>REST</h2>
<blockquote><p>“Architectural Styles and the Design of Network-based Software Architectures”</p></blockquote>
<p class='center'>— Roy Fielding (<a href='http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm'>2000</a>)</p>
</section><section class='fragments' name='28'>
<h2>REST</h2>
<p class='fragment'>After the fact description of how the web works</p>
<p class='fragment'>Uniform interface, URIs, links</p>
<p class='fragment'>Allowed for anarchy at massive scale</p>



</section><section class='fragments' name='29'>
<h2>Some Vocab</h2>
<p class='fragment'><strong>Resource</strong><br>
Anything abstract or concrete you can refer to</p>
<p class='fragment'><strong>URI</strong><br>
Identifier for a resource (URL: pointer to ~)</p>
<p class='fragment'><strong>Representation</strong> (also: Entity)<br>
Serialization of a resource. Specific to <em>Format</em> and <em>Time</em></p>
</section><section name='30'>
<blockquote><p>REST components perform actions on a <strong>resource</strong> by using a <strong>representation</strong> of the current or intended state of that resource and transferring those representations.</p></blockquote>
<p class='center'>— Roy Fielding</p>
</section><section name='31'>
<blockquote style='width: 90%;'><p><strong>Distributed hypermedia</strong> provides a <strong>uniform means</strong> of accessing services <strong>through the embedding of action controls within the presentation of information.</strong></p></blockquote>
<p class='center'>— Fielding</p>
</section><section name='32'>
<blockquote style='width: 50%;'><p>embedding of <strong>action controls</strong> within the presentation of information</p></blockquote>
<p class='center'>— Fielding</p>
</section><section class='text-scale-5' name='33'>
<h2>Embedded Controls</h2>
<pre class='language-html'><code>&lt;ul&gt;
  &lt;li&gt;in-&lt;/li&gt;
  &lt;li&gt;for-&lt;/li&gt;
  &lt;li&gt;ma-&lt;/li&gt;
  &lt;li&gt;tion&lt;/li&gt;
&lt;/ul&gt;

&lt;a href=&quot;...&quot;&gt;action&lt;/a&gt;
&lt;form action=&quot;...&quot; method=&quot;...&quot;&gt;controls&lt;/form&gt;
</code></pre>
</section><section class='fragments' name='34'>
<h2>Why bother?</h2>
<p class='fragment'>Does a browser know the “conventions” your site uses?</p>
<p class='fragment'>Do you need a browser update when a site change?</p>
<p class='fragment'>No! Why not?<br>
Uniform interface: Embedded action controls! (links + forms)</p>
</section><section name='35'>
<p><img src='assets/5e43b1e76e22ba0023d2113e3f4b5f64.png' alt=''></p>
<p class='fragment'>Resources + Representations? Yes</p>
<p class='fragment'>Embedded Action Controls? No</p>
<p class='fragment'>Not hyper{text,media} driven is NOT REST</p>
</section><section class='fragments' name='36'>
<h2>Rails-style “RESTful”</h2>
<p class='fragment'>Based on pre-shared conventions</p>
<p class='fragment'>Great for exposing DB structure over HTTP</p>
<p class='fragment'>Let’s call “Rails-REST” <em>Resourceful</em>, and “real REST” <em>Hypermedia</em></p>
</section><section class='heading' style='margin-top: 70px' name='37'>
<h1>Hypermedia</h1>
<h1>APIs</h1>
</section><section fullscreen-img='img/api_like_the_web.jpg' name='38' data-background='img/api_like_the_web.jpg'>
</section><section class='text-scale-4' name='39'>
<pre class='language-json'><code>{
  &quot;id&quot;: 1,
  &quot;total&quot;: 107.5,
  &quot;item_count&quot;: 12,
  &quot;_links&quot;: {
    &quot;http://api.ticketsolve.com/rel/checkout&quot;: {
      &quot;href&quot;: &quot;/api/checkout&quot;
    }
  },
  &quot;_controls&quot;: {
    &quot;empty_cart&quot;: {
      &quot;name&quot;: &quot;empty_cart&quot;,
      &quot;method&quot;: &quot;DELETE&quot;,
      &quot;href&quot;: &quot;/api/cart&quot;
    }
  }
}
</code></pre>





</section><section class='heading center' style='margin-top: 70px;' name='40'>
<h1>Media types</h1>
<h2>RFC 4288</h2>








</section><section name='41'>
<h2>Media Types</h2>
<blockquote><p>Accept: text/html</p></blockquote>
<blockquote><p>Content-type: application/vnd.collection+json</p></blockquote>
</section><section class='fragments' name='42'>
<h2>Media Types</h2>
<p class='fragment'>Originated in email as MIME types</p>
<p class='fragment'>Mechanism for labeling content</p>
<p class='fragment'>IANA keeps a registry</p>
</section><section class='heading center' style='margin-top: 70px;' name='43'>
<h1>Web Linking</h1>
<h2>RFC5988</h2>







</section><section class='text-scale-3' name='44'>
<h2>Rels</h2>
<pre class='language-html'><code>&lt;link rel=&quot;stylesheet&quot;
  href=&quot;/stylesheets.css&quot;
  type=&quot;text/css&quot;&gt;

&lt;link rel=&quot;alternate&quot;
  type=&quot;application/atom+xml&quot;
  href=&quot;/feed.xml&quot;&gt;

&lt;link rel=&quot;author&quot;
  href=&quot;https://plus.google.com/u/0/112268398775525141261&quot;&gt;

&lt;link rel=&quot;self&quot; href=&quot;http://blog.url.com/feed.xml&quot; /&gt;
</code></pre>
</section><section class='fragments' name='45'>
<h2>Rels</h2>
<p class='fragment'>Originated in HTML, spread to: XFN, Atom</p>
<p class='fragment'>Mechanism for labeling links</p>
<p class='fragment'>Microformats &amp; IETF keep a registry</p>
</section><section class='fragments' name='46'>
<h2>Rels</h2>
<p class='fragment'>Can be registered keyword:<br>
    <code>alternate</code>, <code>self</code>, <code>stylesheet</code>, <code>profile</code></p>
<p class='fragment'>Or custom by using URIs<br>
    <code>http://api.foo.com/rel/product</code></p>
<p class='fragment'>Simply identifiers, but great to point to docs</p>
</section><section name='47'>
<h2>profile rel</h2>
<blockquote><p>Allows clients to learn about additional semantics (constraints, conventions, extensions)</p></blockquote>
<p class='center'>— RFC6906</p>
</section><section class='heading' name='48'>
<h1>Story Time</h1>
</section><section class='fragments' name='49'>
<h2>New Front End</h2>
<p class='fragment'>Feature-flagged “slices”</p>
<p class='fragment'>Work from show listing to checkout</p>
<p class='fragment'>Roll out to volunteer customers</p>
</section><section name='50'>
<h2>Step 1: Listing page</h2>
</section><section fullscreen-img='img/new_frontend.png' name='51' data-background='img/new_frontend.png'>
</section><section name='52'>
<h2><strike>Step 1: Listing page</strike></h2>
<h2>Step 0: Groundwork</h2>
</section><section class='fragments' name='53'>
<h2>Groundwork</h2>
<p class='fragment'>Did a ton of research</p>
<p class='fragment'>Decided to use ActiveModel::Serializers, JSON-API, Ember</p>
<p class='fragment'>In the end only Ember stuck</p>
</section><section class='fragments' name='54'>
<h2>Backend Stack</h2>
<p class='fragment'>AMS (at the time) lacking stewardship, buggy</p>
<p class='fragment'>No intermediate representation</p>
<p class='fragment'>JSON-API unstable and lacking hypermedia controls</p>
</section><section fullscreen-img='img/knowlegde_change_graph.png' name='55' data-background='img/knowlegde_change_graph.png'>
</section><section class='center big-image' name='56'>
<p><img src='assets/8802bcb27f73bd1398a2c13bb229acc2.jpg' alt=''> <img src='assets/bd3d5bfcfc61f33b41d82b34a6aacfcc.jpg' alt=''></p>
</section><section class='yak-heading center' name='57'>
<h1>Yaks</h1>
</section><section class='fragments' name='58'>
<h2>Yaks</h2>
<p class='fragment'>v0.0.0 written over a weekend</p>
<p class='fragment'>Already did what AMS was doing before (for us)</p>
<p class='fragment'>Made it easy to switch to HAL</p>
</section><section class='fragments' name='59'>
<h2>Yaks</h2>
<p class='fragment'>Since then: 427 commit, 32 releases, 12 contributors</p>
<p class='fragment'>Support for HAL, JSON-API, Collection+JSON, HTML, Transit.</p>
<p class='fragment'>Mutation tested, battle tested</p>
</section><section class='fragments' name='60'>
<h2>Step 1: Listing page</h2>
<p class='fragment'>Implement <code>/api/shows</code></p>
<p class='fragment'>Use the Yaks DSL to represent <code>Show</code> object</p>
<p class='fragment'>For now shows will link to the legacy show pages</p>
</section><section class='text-scale-5' name='61'>
<pre class='language-ruby'><code>class ShowMapper &lt; Yaks::Mapper
  attributes :id, :name, :dates, :description

  link rels[:events], &#x27;/api/shows/{id}/events&#x27;
  link rels[:legacy], &#x27;/shows/{id}/events&#x27;

  has_many :venues
  has_one :event_category
end
</code></pre>
</section><section class='text-scale-5' name='62'>
<h2>HAL</h2>
<p>Hypertext Application Language</p>
<blockquote style='width:100%'><p>application/hal+json</p></blockquote>
<pre class='language-json'><code>{
  &lt;attributes&gt;,
  &quot;_links&quot;: { &lt;rel =&gt; link&gt;},
  &quot;_embedded&quot;: { &lt;rel =&gt; resource&gt; },
}
</code></pre>
</section><section class='text-scale-5' name='63'>
<pre class='language-json'><code>{
  &quot;id&quot;: 7,
  &quot;name&quot;: &quot;The Two Gentlemen of Verona&quot;,

  &quot;_links&quot;: {
    &quot;http://api.ticketsolve.com/rel/legacy&quot;: {
      &quot;href&quot;: &quot;/shows/7/events&quot;
    }
  },

  &quot;_embedded&quot;: {
    &quot;http://api.ticketsolve.com/rel/event_category&quot;: {
      &quot;name&quot;: &quot;Drama&quot;,
    }
  }
}
</code></pre>




</section><section fullscreen-img='img/yaks_pipeline.jpg' name='64' data-background='img/yaks_pipeline.jpg'>
</section><section class='text-scale-5' name='65'>
<h2>Yaks::Resource</h2>
<pre class='language-ruby'><code>Yaks::Resource.new(
  attributes: {
    first_name: &quot;Arne&quot;,
    last_name: &quot;Brasseur&quot;
  },
  ...
)
</code></pre>
</section><section class='text-scale-5' name='66'>
<h2>Yaks::Resource</h2>
<pre class='language-ruby'><code>Yaks::Resource.new(
  ...,
  links: [
    Yaks::Resource::Link.new(
      rel: &#x27;collection&#x27;, uri: &#x27;/api/users&#x27;)
  ]
  ...
)
</code></pre>
</section><section class='text-scale-5' name='67'>
<h2>Yaks::Resource</h2>
<pre class='language-ruby'><code>Yaks::Resource.new(
  ...,
  subresources: [
    Yaks::Resource.new(
      attributes: { },
      links: [ ]
      subresources: [ ]
    )
  ],
  ...
)
</code></pre>
</section><section class='text-scale-5' name='68'>
<h2>Yaks::Resource</h2>
<pre class='language-ruby'><code>Yaks::Resource.new(
  ...,
  forms: [
    Yaks::Resource::Form.new(
      name: &#x27;create_talk&#x27;
      method: &#x27;POST&#x27;,
      action: &#x27;/api/talk&#x27;,
      fields: [...]
    )
  ]
)
</code></pre>





</section><section class='fragments' name='69'>
<h2>Step 1.5: Pagination</h2>
<p class='fragment'>Just use links!</p>
<p class='fragment'>Standard rels for this, <code>previous</code> and <code>next</code></p>
<p class='fragment'>Client has minimal knowledge, server is able to change</p>
</section><section class='text-scale-4' name='70'>
<blockquote style='width: 100%'><p>GET /api/shows?offset=50</p></blockquote>
<pre class='language-json'><code>{
  &quot;count&quot;: 120,
  &quot;offset&quot;: 50,

  &quot;_links&quot;: {
    &quot;profile&quot;: [{&quot;href&quot;: &quot;http://api.ts.com/profile/collection&quot;}],
    &quot;previous&quot;: {&quot;href&quot;: &quot;/api/shows&quot;},
    &quot;next&quot;:     {&quot;href&quot;: &quot;/api/shows?offset=100&quot;},
  },

  &quot;_embedded&quot;: {
    &quot;http://api.ticketsolve.com/rel/shows&quot;: [
    ]
  }
}
</code></pre>
</section><section name='71'>
<h2>Step 2: Events Page</h2>
</section><section fullscreen-img='img/events_list.png' name='72' data-background='img/events_list.png'>
</section><section fullscreen-img='img/events_calendar.png' name='73' data-background='img/events_calendar.png'>
</section><section class='fragments' name='74'>
<h2>List or Calendar</h2>
<p class='fragment'>Let API decide, frontend stays dumb</p>
<p class='fragment'>Collection will have different profile</p>
<p class='fragment'>Different pagination? No problem</p>
</section><section class='text-scale-2' name='75'>
<pre class='language-json'><code>{
  &quot;_links&quot;: {
    &quot;profile&quot;: [
      {&quot;href&quot;: &quot;http://api.ticketsolve.com/profile/collection&quot;},
      {&quot;href&quot;: &quot;http://api.ticketsolve.com/profile/event_list&quot;}
    ],
    &quot;previous&quot;: {&quot;href&quot;: &quot;/api/shows7/events&quot;},
    &quot;next&quot;:     {&quot;href&quot;: &quot;/api/shows7/events?offset=100&quot;},
  },

  &quot;_embedded&quot;: {
    &quot;http://api.ticketsolve.com/rel/events&quot;: [ ... ]
  }
}
</code></pre>
</section><section class='text-scale-2' name='76'>
<pre class='language-json'><code>{
  &quot;_links&quot;: {
    &quot;profile&quot;: [
      {&quot;href&quot;: &quot;http://api.ticketsolve.com/profile/collection&quot;},
      {&quot;href&quot;: &quot;http://api.ticketsolve.com/profile/event_calendar&quot;}
    ],
    &quot;previous&quot;: {&quot;href&quot;: &quot;/api/shows7/events?year_month=2015-02&quot;},
    &quot;next&quot;:     {&quot;href&quot;: &quot;/api/shows7/events?year_month=2015-04&quot;}
  },

  &quot;_embedded&quot;: {
    &quot;http://api.ticketsolve.com/rel/events&quot;: [ ... ]
  }
}
</code></pre>
</section><section class='fragments' name='77'>
<h2>Step 3:  Cart</h2>
<p class='fragment'>Time to introduce forms!</p>
<p class='fragment'>Ticket, Product, LineItem: all can “change_quantity”</p>
<p class='fragment'>Form control present ⇒ UI control present</p>
</section><section class='text-scale-5' name='78'>
<pre class='language-ruby'><code>class TicketPriceMapper &lt; BaseMapper
  attributes :id, :name, :price

  form :change_quantity do
    action &#x27;/api/cart/ticket_line_items&#x27;
    method &#x27;POST&#x27;

    number :quantity
    hidden :ticket_price_id, value: -&gt;{ id }
  end
end
</code></pre>
</section><section class='text-scale-5' name='79'>
<pre class='language-json'><code>&quot;_controls&quot;: {
  &quot;change_quantity&quot;: {
    &quot;name&quot;: &quot;change_quantity&quot;,
    &quot;method&quot;: &quot;POST&quot;,
    &quot;media_type&quot;: &quot;application/x-www-form-urlencoded&quot;,
    &quot;fields&quot;: [
      { &quot;name&quot;: &quot;quantity&quot;, &quot;type&quot;: &quot;number&quot; },
      { &quot;name&quot;: &quot;ticket_price_id&quot;,
        &quot;type&quot;: &quot;hidden&quot;, &quot;value&quot;: 47 }
    ],
    &quot;href&quot;: &quot;/api/cart/ticket_line_items&quot;
  }
}
</code></pre>
</section><section fullscreen-img='img/events_calendar.png' name='80' data-background='img/events_calendar.png'>
</section><section fullscreen-img='img/cart.png' name='81' data-background='img/cart.png'>









</section><section name='82'>
<h2>Step 4: Checkout</h2>
</section><section fullscreen-img='img/checkout.png' name='83' data-background='img/checkout.png'>
</section><section class='fragments' name='84'>
<h2>Checkout</h2>
<p class='fragment'>Another big form</p>
<p class='fragment'>But now: Validation, pre-filling, error reporting</p>
<p class='fragment'>Just like HTML: Form fields contain everything</p>


</section><section class='heading' style='margin-top: 70px;' name='85'>
<h1>DEMO</h1>
<h2>yaks-html</h2>
</section><section class='fragments' name='86'>
<h2>Current Status</h2>
<p class='fragment'>Finished end-to-end</p>
<p class='fragment'>In use by a handful of customers</p>
<p class='fragment'>Filling in missing features</p>





</section><section fullscreen-img='img/yay.jpg' name='87' data-background='img/yay.jpg'>
</section><section class='center' style='font-size: 200%;' name='88'>
<h1>Q?</h1>
</section><section class='center' style='font-size: 200%;' name='89'>
<h1>Thank You!</h1>
<p>Twitter: @plexus</p>
<p>github:plexus/yaks</p>

















</section><section class='center' name='90'>
<p><img src='assets/f20baf9ca88848fc34dd3f1f5cb06b00.png' alt=''></p>
</section><section class='heading' name='91'>
<h1>Ship it!</h1>

</section><section class='text-scale-4' name='92'>
<blockquote style='width:100%'><p>Content-type: application/halo+json</p></blockquote>
<pre class='language-json'><code>{
  &quot;id&quot;: 5,
  &quot;expires_at&quot;: &quot;2017-02-11T01:23:32+00:00&quot;,
  &quot;total&quot;: 50.0,
  &quot;item_count&quot;: 2,
  &quot;_links&quot;: {
    &quot;profile&quot;: [
      {&quot;href&quot;: &quot;http://api.ticketsolve.com/profile/cart&quot;}
    ],
    &quot;self&quot;: {&quot;href&quot;: &quot;/api/cart&quot;},
    &quot;http://api.ticketsolve.com/rel/checkout&quot;: {
      &quot;href&quot;: &quot;/api/checkout&quot;
    }
  },
  &quot;_embedded&quot;: { ... },
  &quot;_controls&quot;: { ... }
}
</code></pre>

</section><section name='93'>
<p>Interesting bits</p>
<ul><li><p>invalidates</p></li><li><p>ErrorMapper</p></li><li><p>FormError</p></li><li><p>change_quantity</p></li><li><p>presence/abscence of form control reflects on GUI</p></li><li><p>Ember hypermedia<br>
** resource/link/form objects<br>
** creates right type</p></li></ul>















</section><section fullscreen-img='img/fin.jpg' name='94' data-background='img/fin.jpg'>












</section><section class='text-scale-5' name='95'>
<pre class='language-ruby'><code>class CartMapper &lt; BaseMapper
  attributes :id, :expires_at, :total, :item_count
  link :self, &#x27;/api/cart&#x27;

  has_many :line_items,
           collection_mapper: LineItemCollectionMapper
  has_one :promotion_code

  form :promotion_code do
    method &#x27;POST&#x27;
    action &#x27;/api/cart/promotion_code&#x27;

    text :code, label: &#x27;promotion_code.label&#x27;,
         value: -&gt;{ cart.promotion_code.code }
  end
end
</code></pre></section></div></div><script src='assets/8244e91e3efc1ad6285d9beb8125fe4b.js' type='text/javascript'></script><script src='assets/e1e39b646fdf31ab1352cb14bee76d84.js' type='text/javascript'></script><script>Reveal.initialize({"dependencies":[],"history":true,"transition":"none","backgroundTransition":"none","width":1500,"height":1000,"loop":true,"include_assets":true});</script></body></html>
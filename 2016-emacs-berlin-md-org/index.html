<!DOCTYPE html>
<html><head><link href='assets/38b7430b5ca5b0ee5308d3cca6a8b055.css' rel='stylesheet'><title>Treating Markdown as org-mode</title><link rel='stylesheet' href='assets/5133d11fbaf87d3978cf403eba33c764.css'><script src='assets/ce599fd2ea4bde549efc6f79353a9ed0.js'></script><script>hljs.initHighlightingOnLoad();</script><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><link rel='stylesheet' type='text/css' href='assets/5a0ca255fce9de83dde16a0f27d788fe.css'><link rel='stylesheet' type='text/css' href='assets/94fa0cdaf3b72708d0b40ad6d4b6a30d.css'></head><body class='shower list'><section class='slide' name='1'>
<h2>Emacs Berlin</h2>
<p>Welcome!</p>
<p>Pizzas by Lambda Island, drinks by Contentful! &lt;3</p>
<h2>Wifi</h2>
<p>Contentful Guest</p>
<p>password: casacontenta</p>
<p>(network maintenance at 19:00)</p>
</section><section class='slide' id='cover' name='2'>
<h2>Treating Markdown As org-mode</h2>
<p>A presentation by <a href='https://devblog.arnebrasseur.net'>Arne Brasseur</a></p>
<p>for <a href='http://emacs-berlin.org/'>Emacs Berlin, September 2015</a>.</p>
<p>28 September 2016</p>
</section><section class='slide' name='3'>
<h2>What already works</h2>
<p>Cycling through headings</p>
<ul><li><code>Tab</code> Cycle current header</li><li><code>S-Tab</code> Cycle all headers</li></ul>
</section><section class='slide' name='4'>
<h2>What already works</h2>
<p>Promoto/demote/move entire subtrees</p>
<ul><li><code>M-S-&lt;left&gt;</code> Promote</li><li><code>M-S-&lt;right&gt;</code> Demote</li><li><code>M-S-&lt;up&gt;</code> Move up</li><li><code>M-S-&lt;down&gt;</code> Move down</li></ul>
</section><section class='slide' name='5'>
<h2>What already works</h2>
<p>Follow links:</p>
<ul><li><code>C-c C-o</code> Open link at point</li></ul>
</section><section class='slide' name='6'>
<h2>Creating links</h2>
<p>Bindings are different</p>
<ul><li>org-mode <code>C-c C-l</code></li><li>markdown-mode <code>C-c C-a l</code></li></ul>
<p>Behaviour is different</p>
</section><section class='slide' name='7'>
<h2>Creating links</h2>
<pre class='language-clojure'><code>(defun plexus/md-insert-link ()
  (interactive)
  (let ((link (read-string &quot;Link: &quot;))
        (desc (read-string &quot;Description: &quot;)))
    (when (string= &quot;&quot; desc)
      (setq desc
          (buffer-substring-no-properties (mark) (point)))
      (delete-region (mark) (point)))
    (insert (concat &quot;[&quot; desc &quot;](&quot; link &quot;)&quot;))))

(define-key
  markdown-mode-map
  (kbd &quot;C-c C-l&quot;)
  &#x27;plexus/md-insert-link)
</code></pre>
</section><section class='slide' name='8'>
<h2>Code blocks</h2>
<p>Inserting in org-mode: <code>&lt; s TAB</code></p>
<p>Inserting in gfm-mode: ```</p>
<p>Editing in org-mode: <code>C-c C-&#x27;</code></p>
<p>Editing in markdown-mode: does not exist</p>
</section><section class='slide' name='9'>
<h2>Code blocks</h2>
<p>Insert like in org-mode, with Yasnippet</p>
<p><code>M-x yas-new-snippet</code></p>

<pre><code># -*- mode: snippet -*-
# name: source-block
# key: &lt;s
# --
\`\`\` $1
$2
\`\`\`
</code></pre>
</section><section class='slide' name='10'>
<h2>Code blocks</h2>
<pre class='language-clojure'><code>(define-key markdown-mode-map (kbd &quot;C-c &#x27;&quot;)
            &#x27;plexus/edit-md-source-block)

(define-key plexus/restore-mode-map (kbd &quot;C-c &#x27;&quot;)
            &#x27;plexus/restore-md-source-block)

(defvar plexus/restore-mode-map (make-sparse-keymap)
  &quot;Keymap for plexus/restore-mode.&quot;)

(define-minor-mode plexus/restore-mode
  &quot;Temporary minor mode to return to the markdown file&quot;
  nil
  :lighter &quot; â™»&quot;
  plexus/restore-mode-map)
</code></pre>
</section><section class='slide' name='11'>
<h2>Code blocks</h2>

<pre class='language-clojure'><code>(defun plexus/edit-md-source-block ()
  (interactive)
  (let ((buffer nil))
    (save-excursion
      (re-search-backward &quot;\n```\[a-z- \]+\n&quot;)
      (re-search-forward &quot;\n``` *&quot;)
      (let ((lang (thing-at-point &#x27;symbol))
            (md-buffer (current-buffer)))
        (forward-line)
        (let ((start (point)))
          (re-search-forward &quot;\n```&quot;)
          (let* (...)
            (setq buffer ...))
    (switch-to-buffer buffer)
    (plexus/restore-mode 1)))
</code></pre>
</section><section class='slide' name='12'>
<h2>Code blocks</h2>
<pre class='language-clojure'><code>(let* ((end (- (point) 4))
       (source (buffer-substring-no-properties start end)))
  (setq buffer (get-buffer-create (concat &quot;*&quot; lang &quot;*&quot;)))
  (set-buffer buffer)
  (erase-buffer)
  (insert source)
  (setq restore-start start)
  (setq restore-end end)
  (setq restore-buffer md-buffer)
  (make-local-variable &#x27;restore-start)
  (make-local-variable &#x27;restore-end)
  (make-local-variable &#x27;restore-buffer)
  (funcall (intern (concat (downcase lang) &quot;-mode&quot;))))
</code></pre>
</section><section class='slide' name='13'>
<h2>Code blocks</h2>
<pre class='language-clojure'><code>(defun plexus/restore-md-source-block ()
  (interactive)
  (let ((contents (buffer-string))
        (edit-buffer (current-buffer)))
    (save-excursion
     (set-buffer restore-buffer)
     (delete-region restore-start restore-end)
     (goto-char restore-start)
     (insert contents))
    (switch-to-buffer restore-buffer)
    (kill-buffer edit-buffer)))
</code></pre></section><script src='assets/a3b20c8ec6c5c4b05bcb38d98d132244.js' type='text/javascript'></script></body></html>